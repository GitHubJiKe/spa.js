var k=Object.defineProperty;var E=s=>{throw TypeError(s)};var B=(s,e,t)=>e in s?k(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var C=(s,e,t)=>B(s,typeof e!="symbol"?e+"":e,t),L=(s,e,t)=>e.has(s)||E("Cannot "+t);var i=(s,e,t)=>(L(s,e,"read from private field"),t?t.call(s):e.get(s)),c=(s,e,t)=>e.has(s)?E("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),a=(s,e,t,n)=>(L(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const x of r.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&n(x)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();var d,m,o,w;class H{constructor(e=document.body){c(this,d);c(this,m,[]);c(this,o);c(this,w);e&&(typeof e=="string"?a(this,d,document.querySelector(e)):a(this,d,e))}addPage(e){return e.setAppInstance(this),i(this,m).push(e),this}render(e){if(i(this,o)){i(this,d).appendChild(i(this,o).element());return}if(!e){localStorage.removeItem("SPA_CURRENT_PATH"),a(this,o,i(this,m)[0]),i(this,d).appendChild(i(this,o).element());return}const t=localStorage.getItem("SPA_CURRENT_PATH");a(this,o,t?i(this,m).find(n=>n.route().path===t):i(this,m)[0]),i(this,d).appendChild(i(this,o).element())}switchTo(e){const t=i(this,m).find(n=>n.route().path===e);if(!t)throw new Error(`Page not found: ${e}`);localStorage.setItem("SPA_CURRENT_PATH",e),a(this,w,i(this,o)),i(this,w).animateOut(),setTimeout(()=>{i(this,d).removeChild(i(this,w).element())},500),a(this,o,t),i(this,o).animateIn(),setTimeout(()=>{i(this,d).appendChild(i(this,o).element()),i(this,o).pageTitle&&(document.title=i(this,o).pageTitle)},500)}}d=new WeakMap,m=new WeakMap,o=new WeakMap,w=new WeakMap;class R{}var p;const P=class P extends R{constructor(){super(...arguments);C(this,"ele");c(this,p,[])}setAppInstance(t){P.appInstance=t}element(){return this.ele}removeChild(t){return a(this,p,i(this,p).filter(n=>n!==t)),this}children(){return i(this,p)}style(t){return this.element().style.cssText+=t,this}classname(t){t.includes(" ")?t.split(" ").forEach(l=>this.element().classList.add(l)):this.element().classList.add(t);const n=this.element().parentElement;return n&&(n.removeChild(this.element()),n.appendChild(this.element())),this}on(t,n){return this.element().addEventListener(t,l=>n(l,P.appInstance,this)),this}addChild(t){return i(this,p).push(t),this.element().appendChild(t.element()),this}};p=new WeakMap,C(P,"appInstance");let f=P;var _,g,b;class I extends f{constructor(t){super();c(this,_,"");c(this,g,[]);c(this,b,[]);C(this,"pageTitle");t&&(this.pageTitle=t),this.ele=document.createElement("div"),this.ele.style.cssText="height:100vh;width:100vw;",this.ele.setAttribute("data-name","Page")}path(t){return a(this,_,t),this}route(){return{path:i(this,_)}}enter(t){return a(this,g,t.split(" ")),this.ele.classList.add(...i(this,g)),this}out(t){return a(this,b,t.split(" ")),this}animateIn(){this.ele.classList.remove(...i(this,b)),this.ele.classList.add(...i(this,g))}animateOut(){this.ele.classList.remove(...i(this,g)),this.ele.classList.add(...i(this,b))}}_=new WeakMap,g=new WeakMap,b=new WeakMap;var T;class A extends f{constructor(t){super();c(this,T);a(this,T,t),this.ele=document.createElement("div"),this.ele.setAttribute("data-name",`LayoutBlock_${t}`),this.ele.style.display="flex",this.ele.style.flexDirection=i(this,T)}}T=new WeakMap;let h=[],u=0;const v=4;let D=s=>{let e=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=e.push(n),()=>{for(let r=u+v;r<h.length;)h[r]===n?h.splice(r,v):r+=v;let l=e.indexOf(n);~l&&(e.splice(l,1),--t.lc||t.off())}},notify(n,l){let r=!h.length;for(let x of e)h.push(x,t.value,n,l);if(r){for(u=0;u<h.length;u+=v)h[u](h[u+1],h[u+2],h[u+3]);h.length=0}},off(){},set(n){let l=t.value;l!==n&&(t.value=n,t.notify(l))},subscribe(n){let l=t.listen(n);return n(t.value),l},value:s};return t};const O={title:"Welcome to SPA.js",subTitle:"nanostores is great!"},y=D(O);function N(s){y.set({...y.get(),title:s})}function M(s){y.set({...y.get(),subTitle:s})}function U(){y.set(O)}class S extends f{addChild(e){return this}constructor(e,t){super(),this.ele=document.createElement("span"),this.ele.setAttribute("data-name","TextBlockWithStore"),this.ele.textContent=e.value[t],e.subscribe(n=>{this.ele.textContent=n[t]})}}class j extends f{constructor(e){super(),this.ele=document.createElement("img"),e&&(this.ele.src=e)}element(){return this.ele}width(e){return this.ele.style.width=e,this}height(e){return this.ele.style.height=e,this}src(e){return this.ele.src=e,this}}class q extends f{constructor(){super(),this.ele=document.createElement("div"),this.ele.setAttribute("data-name","PureBlock")}}function W(){return new q().style("width:100vw;height:100vh")}class $ extends f{addChild(e){return this}constructor(e){super(),this.ele=document.createElement("span"),this.ele.setAttribute("data-name","TextBlock"),this.ele.textContent=e}}const z=new I("About").addChild(new A("column").addChild(W().style("cursor:pointer;").addChild(new j("https://plus.unsplash.com/premium_photo-1731948133366-0d1dbb7db851?q=80&w=3870&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D").width("100%").height("100%")).addChild(new $("我是图片").style("position:absolute;left:45%;top:45%;font-size:5rem;color:red;font-weight:900;")).on("click",(s,e)=>{U(),e.switchTo("/")})).style("height:100%;")).path("/about").enter("animate__animated animate__fadeInDown").out("animate__animated animate__fadeOutDown"),Q=new I("Home").addChild(new A("row").addChild(new A("column").style("flex:1;display:flex;justify-content:center;align-items:center;").addChild(new S(y,"title").style("color:white;font-size:5rem;font-weight:900;").on("click",s=>{N("欢迎使用SPA.js"),s.stopPropagation()})).addChild(new S(y,"subTitle").style("color:#000;font-size:3rem;font-weight:600;").on("click",s=>{M("nanostores 泰裤辣！"),s.stopPropagation()})).on("click",(s,e)=>{e.addPage(z),e.switchTo("/about")})).style("height:100%;background-color: red;")).path("/").enter("animate__animated animate__backInLeft").out("animate__animated animate__backOutLeft");new H("#app").addPage(Q).render();
